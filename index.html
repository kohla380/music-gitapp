<!DOCTYPE html>
<html lang="my">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>My Music & Tayar Portal</title>
    <style>
        :root { --primary: #6a11cb; --accent: #3498db; --danger: #e74c3c; }
        body { font-family: 'Pyidaungsu', sans-serif; background: #f0f2f5; margin: 0; display: flex; min-height: 100vh; }
        .sidebar { width: 200px; background: #2c3e50; color: white; padding: 20px; position: fixed; height: 100vh; }
        .main { margin-left: 240px; flex: 1; padding: 20px; }
        .post-card { background: white; border-radius: 12px; padding: 20px; margin-bottom: 20px; box-shadow: 0 4px 6px rgba(0,0,0,0.1); position: relative; }
        .del-btn { position: absolute; top: 10px; right: 10px; cursor: pointer; background: none; border: none; font-size: 18px; color: #ccc; }
        .del-btn:hover { color: var(--danger); }
        audio { width: 100%; margin-top: 10px; }
        .fab { position: fixed; bottom: 30px; right: 30px; width: 60px; height: 60px; background: #2ecc71; color: white; border-radius: 50%; font-size: 30px; border: none; cursor: pointer; box-shadow: 0 4px 10px rgba(0,0,0,0.3); }
        #upload-modal { display: none; position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); background: white; padding: 25px; border-radius: 15px; z-index: 1000; box-shadow: 0 0 20px rgba(0,0,0,0.5); width: 90%; max-width: 400px; }
        input, select { width: 100%; padding: 10px; margin: 10px 0; border: 1px solid #ddd; border-radius: 5px; }
    </style>
</head>
<body>
    <div class="sidebar">
        <h3>Menu</h3>
        <p>ğŸ  á€¡á€¬á€¸á€œá€¯á€¶á€¸</p>
    </div>
    <div class="main">
        <h1>ğŸµ á€€á€»á€½á€”á€ºá€¯á€•á€ºá á€á€›á€¬á€¸á€”á€¾á€„á€·á€º á€á€®á€á€»á€„á€ºá€¸á€™á€»á€¬á€¸</h1>
        <div id="display-area">Loading...</div>
    </div>
    <button class="fab" onclick="document.getElementById('upload-modal').style.display='block'">+</button>
    <div id="upload-modal">
        <h3>á€¡á€á€…á€ºá€‘á€Šá€·á€ºá€›á€”á€º</h3>
        <input type="text" id="title" placeholder="á€á€±á€«á€„á€ºá€¸á€…á€‰á€º">
        <input type="text" id="author" placeholder="á€†á€›á€¬á€á€±á€¬á€º/á€¡á€†á€­á€¯á€á€±á€¬á€º">
        <input type="text" id="url" placeholder="GitHub Link (á€¥á€•á€™á€¬- https://.../tayar2.mp3)">
        <button onclick="savePost()" style="width:100%; padding:10px; background:#2ecc71; color:white; border:none; border-radius:5px;">á€á€„á€ºá€™á€Šá€º</button>
        <button onclick="document.getElementById('upload-modal').style.display='none'" style="width:100%; margin-top:5px; background:#eee; border:none; padding:10px;">á€•á€­á€á€ºá€•á€«</button>
    </div>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-app.js";
        import { getFirestore, collection, addDoc, deleteDoc, doc, query, orderBy, onSnapshot } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js";

        const firebaseConfig = {
            apiKey: "AIzaSyC4c2aE6LOMjf00e_SPIB7snz8MbYy37_g",
            authDomain: "mymusicapp-380.firebaseapp.com",
            projectId: "mymusicapp-380",
            storageBucket: "mymusicapp-380.firebasestorage.app",
            messagingSenderId: "362148026754",
            appId: "1:362148026754:web:e5b21177553bcf4444979b"
        };
        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);

        window.savePost = async () => {
            const title = document.getElementById('title').value;
            const author = document.getElementById('author').value;
            const url = document.getElementById('url').value;
            if(title && url) {
                await addDoc(collection(db, "tayar_list"), { title, author, audioUrl: url, date: Date.now() });
                document.getElementById('upload-modal').style.display='none';
            }
        };

        window.deletePost = async (id) => { if(confirm("á€–á€»á€€á€ºá€™á€¾á€¬á€œá€¬á€¸?")) await deleteDoc(doc(db, "tayar_list", id)); };

        const q = query(collection(db, "tayar_list"), orderBy("date", "desc"));
        onSnapshot(q, (snap) => {
            let html = "";
            snap.forEach(d => {
                const data = d.data();
                html += `<div class="post-card">
                    <button class="del-btn" onclick="deletePost('${d.id}')">ğŸ—‘ï¸</button>
                    <h3>${data.title}</h3>
                    <p>ğŸ‘¤ ${data.author}</p>
                    <audio controls src="${data.audioUrl}"></audio>
                </div>`;
            });
            document.getElementById('display-area').innerHTML = html || "á€˜á€¬á€™á€¾á€™á€›á€¾á€­á€á€±á€¸á€•á€«á‹ '+' á€€á€­á€¯á€”á€¾á€­á€•á€ºá€•á€¼á€®á€¸ á€‘á€Šá€·á€ºá€•á€«á‹";
        });
    </script>
</body>
</html>


